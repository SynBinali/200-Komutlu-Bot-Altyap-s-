const fs = require('fs');

const db = {};

const get = async() => await JSON.parse(fs.readFileSync("./captchadata.json", "utf8"));

const write = async(data) => await fs.writeFileSync("./captchadata.json", JSON.stringify(data, null, 2));


db.delete = function(info) {
    const data = get()
    delete data[info];
    write(data)
}

db.set = function(info, is) {
    const data = get();
    data[info] = is;
    write(data);
}

db.get = function(info) {
    const data = get();
    return data[info] ? data[info] : null;
}

db.getAll = function(info) {
    let data = get();
    return data;
}

module.exports = db;